<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>capagris - maker & tinkerer</title>
		<link rel="stylesheet" href="base.css" />
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

		<link rel="preload" href="imgs/capa-talking.gif" as="image" />
		<link rel="preload" href="imgs/capa.gif" as="image" />
	</head>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// Variable declarations
			let text = `Greetings stranger. I am capagris, maker and tinkerer...`;
			let index = 0;

			const randomFacts = ["a", "b", "c"];

			// Function to restart the typewriter effect with new text
			function updateText(newText) {
				const bubble = document.querySelector(".bubble p");
				bubble.innerHTML = ""; // Clear current text
				text = newText; // Update global `text` variable with new content
				index = 0; // Reset index for typewriter effect
				typeWriter(); // Restart typewriter effect with new text
			}

			// Typewriter effect
			function typeWriter() {
				const bubble = document.querySelector(".bubble p");
				if (index < text.length) {
					bubble.innerHTML += text.charAt(index);
					index++;
					setTimeout(typeWriter, 55); // Adjust speed as necessary
					bubble.scrollTop = bubble.scrollHeight; // Scroll to the bottom of the bubble
				} else {
					document.querySelector(".icon.ghost").style.backgroundImage =
						'url("imgs/capa.gif")';
				}
			}

			// Event listeners for menu choices
			document.getElementById("work").addEventListener("click", function () {
				updateText(
					"I mostly do project management and front-end dev work though I originally did design for a decade."
				);
			});

			document
				.getElementById("randomFact")
				.addEventListener("click", function () {
					const randomIndex = Math.floor(Math.random() * randomFacts.length);
					updateText(randomFacts[randomIndex]);
				});

			document
				.getElementById("stopMoving")
				.addEventListener("click", function () {
					console.log("stopped");
					document.querySelector(".title").classList.add("stop");
				});

			// Start the typewriter effect on window load
			window.onload = function () {
				typeWriter();
			};
		});
	</script>

	<body>
		<nav class="nav">
			<span class="name">capagris</span>
			<ul class="links">
				<li class="gh"><a href="https://github.com/capagris">github</a></li>
				<li class="so">
					<a href="https://stackoverflow.com/users/142870/capagris"
						>stackoverflow</a
					>
				</li>
			</ul>
		</nav>
		<div class="wrapper">
			<div class="title">
				<div class="bubble medium bottom"><p></p></div>
				<div class="iconWrapper">
					<span class="icon ghost"></span>
				</div>
			</div>
			<div class="choices">
				<button id="work">Work</button>
				<button id="randomFact">Random Fact</button>
				<button id="stopMoving">I'm Getting Dizzy</button>
			</div>
		</div>
	</body>
</html>
